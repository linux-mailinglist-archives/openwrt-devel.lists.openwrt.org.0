Return-Path: <openwrt-devel-bounces+lists+openwrt-devel=lfdr.de@lists.openwrt.org>
X-Original-To: lists+openwrt-devel@lfdr.de
Delivered-To: lists+openwrt-devel@lfdr.de
Received: from bombadil.infradead.org (bombadil.infradead.org [IPv6:2607:7c80:54:e::133])
	by mail.lfdr.de (Postfix) with ESMTPS id 7C6EF127082
	for <lists+openwrt-devel@lfdr.de>; Thu, 19 Dec 2019 23:15:17 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:Subject:MIME-Version:References:
	In-Reply-To:Message-Id:Date:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=0W8I9nV4uPZpBU3lOVGzqn2VZjVs7YPazAVidi67xAY=; b=IbuqKzU5pi2vY3
	oxq4TFtKWn91tNpGUAzxmpMLimEVu2FbaNbYwWWYc/M+WpEz4P1qLH4fj3eN7/xH/tolj2PAuve1q
	6B8MHEbkVZU8yaTNxS1+JOjHxf4yRdUhn8eCNE3NnzCLhaXIUloUgY4ES+1Rg+b+rMn0TvpoHVlfG
	slFWJRxDy71kE3MURWG9y1y/GreqclSI/hiWNhsgddLfGeIJMjc6UIJ/vtHK3mJBTENGrqKrPF0iS
	tKeIT+bj+wpYHgqlANkzoR8UMzpdqNdUhZ440zqC9I6sC5QuVLzcZAIarDd0iCtuRykS3lqfNvKxl
	0qL0UacznmPqFFQAutSQ==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92.3 #3 (Red Hat Linux))
	id 1ii44g-0002GL-K6; Thu, 19 Dec 2019 22:15:14 +0000
Received: from smtp-out.xnet.cz ([178.217.244.18])
 by bombadil.infradead.org with esmtps (Exim 4.92.3 #3 (Red Hat Linux))
 id 1ii41N-00057J-D0
 for openwrt-devel@lists.openwrt.org; Thu, 19 Dec 2019 22:11:54 +0000
Received: from meh.true.cz (meh.true.cz [108.61.167.218])
 (Authenticated sender: petr@true.cz)
 by smtp-out.xnet.cz (Postfix) with ESMTPSA id F03154BD5;
 Thu, 19 Dec 2019 23:11:47 +0100 (CET)
Received: by meh.true.cz (OpenSMTPD) with ESMTP id 06dd6a15;
 Thu, 19 Dec 2019 23:11:38 +0100 (CET)
From: =?UTF-8?q?Petr=20=C5=A0tetiar?= <ynezz@true.cz>
To: openwrt-devel@lists.openwrt.org
Date: Thu, 19 Dec 2019 23:11:25 +0100
Message-Id: <20191219221125.22646-17-ynezz@true.cz>
In-Reply-To: <20191219221125.22646-1-ynezz@true.cz>
References: <20191219221125.22646-1-ynezz@true.cz>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20191219_141149_867967_BA965D60 
X-CRM114-Status: GOOD (  13.21  )
X-Spam-Score: 0.0 (/)
X-Spam-Report: SpamAssassin version 3.4.2 on bombadil.infradead.org summary:
 Content analysis details:   (0.0 points)
 pts rule name              description
 ---- ---------------------- --------------------------------------------------
 -0.0 RCVD_IN_DNSWL_NONE     RBL: Sender listed at https://www.dnswl.org/,
 no trust [178.217.244.18 listed in list.dnswl.org]
 0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 0.0 SPF_NONE               SPF: sender does not publish an SPF Record
Subject: [OpenWrt-Devel] [PATCH ubus 16/16] fix blob parsing vulnerability
 by using blob_parse_untrusted
X-BeenThere: openwrt-devel@lists.openwrt.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <openwrt-devel.lists.openwrt.org>
List-Unsubscribe: <http://lists.infradead.org/mailman/options/openwrt-devel>, 
 <mailto:openwrt-devel-request@lists.openwrt.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/openwrt-devel/>
List-Post: <mailto:openwrt-devel@lists.openwrt.org>
List-Help: <mailto:openwrt-devel-request@lists.openwrt.org?subject=help>
List-Subscribe: <http://lists.infradead.org/mailman/listinfo/openwrt-devel>,
 <mailto:openwrt-devel-request@lists.openwrt.org?subject=subscribe>
Cc: =?UTF-8?q?Petr=20=C5=A0tetiar?= <ynezz@true.cz>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: "openwrt-devel" <openwrt-devel-bounces@lists.openwrt.org>
Errors-To: openwrt-devel-bounces+lists+openwrt-devel=lfdr.de@lists.openwrt.org

YmxvYl9wYXJzZSBleHBlY3RzIGJsb2JzIGZyb20gdHJ1c3RlZCBpbnB1dHMsIGJ1dCBpdCBjYW4g
YmUgc3VwcGxpZWQKd2l0aCBwb3NzaWJseSBtYWxpY2lvdXMgYmxvYnMgZnJvbSB1bnRydXN0ZWQg
aW5wdXRzIGFzIHdlbGwsIHdoaWNoIG1pZ2h0CmxlYWQgdG8gdW5kZWZpbmVkIGJlaGF2aW91ciBh
bmQvb3IgY3Jhc2ggb2YgdWJ1cyBkYWVtb24uIEluIG9yZGVyIHRvCnByZXZlbnQgc3VjaCBjb25k
aXRpb25zLCBzd2l0Y2ggdG8gYmxvYl9wYXJzZV91bnRydXN0ZWQgd2hpY2ggc2hvdWxkCmhvcGVm
dWxseSBoYW5kbGUgc3VjaCB1bnRydXN0ZWQgaW5wdXRzIGFwcHJvcHJpYXRlbHkuCgpTaWduZWQt
b2ZmLWJ5OiBQZXRyIMWgdGV0aWFyIDx5bmV6ekB0cnVlLmN6PgotLS0KIGNsaS5jICAgICAgICAg
ICAgICAgICAgfCAyICstCiBsaWJ1YnVzLWludGVybmFsLmggICAgIHwgMiArLQogbGlidWJ1cy1p
by5jICAgICAgICAgICB8IDQgKystLQogbGlidWJ1cy1vYmouYyAgICAgICAgICB8IDYgKysrLS0t
CiBsaWJ1YnVzLXJlcS5jICAgICAgICAgIHwgNiArKystLS0KIGxpYnVidXMuYyAgICAgICAgICAg
ICAgfCA0ICsrLS0KIHRlc3RzL2Z1enovdGVzdC1mdXp6LmMgfCAyICstCiB1YnVzZC5oICAgICAg
ICAgICAgICAgIHwgMiArLQogdWJ1c2RfYWNsLmMgICAgICAgICAgICB8IDIgKy0KIHVidXNkX3By
b3RvLmMgICAgICAgICAgfCA2ICsrKy0tLQogMTAgZmlsZXMgY2hhbmdlZCwgMTggaW5zZXJ0aW9u
cygrKSwgMTggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvY2xpLmMgYi9jbGkuYwppbmRleCA0
MjFmMjQ0YWQ5ZGMuLmY1NjYyNzliNGY2ZCAxMDA2NDQKLS0tIGEvY2xpLmMKKysrIGIvY2xpLmMK
QEAgLTQ3Miw3ICs0NzIsNyBAQCB1YnVzX2NsaV9tb25pdG9yX2NiKHN0cnVjdCB1YnVzX2NvbnRl
eHQgKmN0eCwgdWludDMyX3Qgc2VxLCBzdHJ1Y3QgYmxvYl9hdHRyICptcwogCWJvb2wgc2VuZDsK
IAljaGFyICpkYXRhOwogCi0JYmxvYl9wYXJzZShtc2csIHRiLCBwb2xpY3ksIFVCVVNfTU9OSVRP
Ul9NQVgpOworCWJsb2JfcGFyc2VfdW50cnVzdGVkKG1zZywgYmxvYl9yYXdfbGVuKG1zZyksIHRi
LCBwb2xpY3ksIFVCVVNfTU9OSVRPUl9NQVgpOwogCiAJaWYgKCF0YltVQlVTX01PTklUT1JfQ0xJ
RU5UXSB8fAogCSAgICAhdGJbVUJVU19NT05JVE9SX1BFRVJdIHx8CmRpZmYgLS1naXQgYS9saWJ1
YnVzLWludGVybmFsLmggYi9saWJ1YnVzLWludGVybmFsLmgKaW5kZXggOGNmOTliM2JjNmIxLi4y
NDQ3N2EwMzIxNDQgMTAwNjQ0Ci0tLSBhL2xpYnVidXMtaW50ZXJuYWwuaAorKysgYi9saWJ1YnVz
LWludGVybmFsLmgKQEAgLTE3LDcgKzE3LDcgQEAKIGV4dGVybiBzdHJ1Y3QgYmxvYl9idWYgYjsK
IGV4dGVybiBjb25zdCBzdHJ1Y3QgdWJ1c19tZXRob2Qgd2F0Y2hfbWV0aG9kOwogCi1zdHJ1Y3Qg
YmxvYl9hdHRyICoqdWJ1c19wYXJzZV9tc2coc3RydWN0IGJsb2JfYXR0ciAqbXNnKTsKK3N0cnVj
dCBibG9iX2F0dHIgKip1YnVzX3BhcnNlX21zZyhzdHJ1Y3QgYmxvYl9hdHRyICptc2csIHNpemVf
dCBsZW4pOwogYm9vbCB1YnVzX3ZhbGlkYXRlX2hkcihzdHJ1Y3QgdWJ1c19tc2doZHIgKmhkcik7
CiB2b2lkIHVidXNfaGFuZGxlX2RhdGEoc3RydWN0IHVsb29wX2ZkICp1LCB1bnNpZ25lZCBpbnQg
ZXZlbnRzKTsKIGludCB1YnVzX3NlbmRfbXNnKHN0cnVjdCB1YnVzX2NvbnRleHQgKmN0eCwgdWlu
dDMyX3Qgc2VxLApkaWZmIC0tZ2l0IGEvbGlidWJ1cy1pby5jIGIvbGlidWJ1cy1pby5jCmluZGV4
IDgxYzFjZDEzMDliMS4uYmExMDE2ZDBmYTA5IDEwMDY0NAotLS0gYS9saWJ1YnVzLWlvLmMKKysr
IGIvbGlidWJ1cy1pby5jCkBAIC00Myw5ICs0Myw5IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgYmxv
Yl9hdHRyX2luZm8gdWJ1c19wb2xpY3lbVUJVU19BVFRSX01BWF0gPSB7CiAKIHN0YXRpYyBzdHJ1
Y3QgYmxvYl9hdHRyICphdHRyYnVmW1VCVVNfQVRUUl9NQVhdOwogCi1fX2hpZGRlbiBzdHJ1Y3Qg
YmxvYl9hdHRyICoqdWJ1c19wYXJzZV9tc2coc3RydWN0IGJsb2JfYXR0ciAqbXNnKQorX19oaWRk
ZW4gc3RydWN0IGJsb2JfYXR0ciAqKnVidXNfcGFyc2VfbXNnKHN0cnVjdCBibG9iX2F0dHIgKm1z
Zywgc2l6ZV90IGxlbikKIHsKLQlibG9iX3BhcnNlKG1zZywgYXR0cmJ1ZiwgdWJ1c19wb2xpY3ks
IFVCVVNfQVRUUl9NQVgpOworCWJsb2JfcGFyc2VfdW50cnVzdGVkKG1zZywgbGVuLCBhdHRyYnVm
LCB1YnVzX3BvbGljeSwgVUJVU19BVFRSX01BWCk7CiAJcmV0dXJuIGF0dHJidWY7CiB9CiAKZGlm
ZiAtLWdpdCBhL2xpYnVidXMtb2JqLmMgYi9saWJ1YnVzLW9iai5jCmluZGV4IDI1ODBiMjQ0MmM0
Yi4uMjljYmIyYjk4ZTZlIDEwMDY0NAotLS0gYS9saWJ1YnVzLW9iai5jCisrKyBiL2xpYnVidXMt
b2JqLmMKQEAgLTEyMSw3ICsxMjEsNyBAQCB2b2lkIF9faGlkZGVuIHVidXNfcHJvY2Vzc19vYmpf
bXNnKHN0cnVjdCB1YnVzX2NvbnRleHQgKmN0eCwgc3RydWN0IHVidXNfbXNnaGRyXwogCXN0cnVj
dCB1YnVzX29iamVjdCAqb2JqOwogCXVpbnQzMl90IG9iamlkOwogCXZvaWQgKnByZXZfZGF0YSA9
IE5VTEw7Ci0JYXR0cmJ1ZiA9IHVidXNfcGFyc2VfbXNnKGJ1Zi0+ZGF0YSk7CisJYXR0cmJ1ZiA9
IHVidXNfcGFyc2VfbXNnKGJ1Zi0+ZGF0YSwgYmxvYl9yYXdfbGVuKGJ1Zi0+ZGF0YSkpOwogCWlm
ICghYXR0cmJ1ZltVQlVTX0FUVFJfT0JKSURdKQogCQlyZXR1cm47CiAKQEAgLTE2MCw3ICsxNjAs
NyBAQCB2b2lkIF9faGlkZGVuIHVidXNfcHJvY2Vzc19vYmpfbXNnKHN0cnVjdCB1YnVzX2NvbnRl
eHQgKmN0eCwgc3RydWN0IHVidXNfbXNnaGRyXwogc3RhdGljIHZvaWQgdWJ1c19hZGRfb2JqZWN0
X2NiKHN0cnVjdCB1YnVzX3JlcXVlc3QgKnJlcSwgaW50IHR5cGUsIHN0cnVjdCBibG9iX2F0dHIg
Km1zZykKIHsKIAlzdHJ1Y3QgdWJ1c19vYmplY3QgKm9iaiA9IHJlcS0+cHJpdjsKLQlzdHJ1Y3Qg
YmxvYl9hdHRyICoqYXR0cmJ1ZiA9IHVidXNfcGFyc2VfbXNnKG1zZyk7CisJc3RydWN0IGJsb2Jf
YXR0ciAqKmF0dHJidWYgPSB1YnVzX3BhcnNlX21zZyhtc2csIGJsb2JfcmF3X2xlbihtc2cpKTsK
IAogCWlmICghYXR0cmJ1ZltVQlVTX0FUVFJfT0JKSURdKQogCQlyZXR1cm47CkBAIC0yNDAsNyAr
MjQwLDcgQEAgaW50IHVidXNfYWRkX29iamVjdChzdHJ1Y3QgdWJ1c19jb250ZXh0ICpjdHgsIHN0
cnVjdCB1YnVzX29iamVjdCAqb2JqKQogc3RhdGljIHZvaWQgdWJ1c19yZW1vdmVfb2JqZWN0X2Ni
KHN0cnVjdCB1YnVzX3JlcXVlc3QgKnJlcSwgaW50IHR5cGUsIHN0cnVjdCBibG9iX2F0dHIgKm1z
ZykKIHsKIAlzdHJ1Y3QgdWJ1c19vYmplY3QgKm9iaiA9IHJlcS0+cHJpdjsKLQlzdHJ1Y3QgYmxv
Yl9hdHRyICoqYXR0cmJ1ZiA9IHVidXNfcGFyc2VfbXNnKG1zZyk7CisJc3RydWN0IGJsb2JfYXR0
ciAqKmF0dHJidWYgPSB1YnVzX3BhcnNlX21zZyhtc2csIGJsb2JfcmF3X2xlbihtc2cpKTsKIAog
CWlmICghYXR0cmJ1ZltVQlVTX0FUVFJfT0JKSURdKQogCQlyZXR1cm47CmRpZmYgLS1naXQgYS9s
aWJ1YnVzLXJlcS5jIGIvbGlidWJ1cy1yZXEuYwppbmRleCBmZDlhNTQ4ODM5ZTQuLmFlOWQxOTI1
ZWNkZiAxMDA2NDQKLS0tIGEvbGlidWJ1cy1yZXEuYworKysgYi9saWJ1YnVzLXJlcS5jCkBAIC0z
MSw3ICszMSw3IEBAIHN0YXRpYyB2b2lkIHJlcV9kYXRhX2NiKHN0cnVjdCB1YnVzX3JlcXVlc3Qg
KnJlcSwgaW50IHR5cGUsIHN0cnVjdCBibG9iX2F0dHIgKmRhCiAJaWYgKCFyZXEtPmRhdGFfY2Ip
CiAJCXJldHVybjsKIAotCWF0dHIgPSB1YnVzX3BhcnNlX21zZyhkYXRhKTsKKwlhdHRyID0gdWJ1
c19wYXJzZV9tc2coZGF0YSwgYmxvYl9yYXdfbGVuKGRhdGEpKTsKIAlpZiAoIWF0dHJbVUJVU19B
VFRSX0RBVEFdKQogCQlyZXR1cm47CiAKQEAgLTMyOCw3ICszMjgsNyBAQCBpbnQgdWJ1c19ub3Rp
Znkoc3RydWN0IHVidXNfY29udGV4dCAqY3R4LCBzdHJ1Y3QgdWJ1c19vYmplY3QgKm9iaiwKIAog
c3RhdGljIGJvb2wgdWJ1c19nZXRfc3RhdHVzKHN0cnVjdCB1YnVzX21zZ2hkcl9idWYgKmJ1Ziwg
aW50ICpyZXQpCiB7Ci0Jc3RydWN0IGJsb2JfYXR0ciAqKmF0dHJidWYgPSB1YnVzX3BhcnNlX21z
ZyhidWYtPmRhdGEpOworCXN0cnVjdCBibG9iX2F0dHIgKiphdHRyYnVmID0gdWJ1c19wYXJzZV9t
c2coYnVmLT5kYXRhLCBibG9iX3Jhd19sZW4oYnVmLT5kYXRhKSk7CiAKIAlpZiAoIWF0dHJidWZb
VUJVU19BVFRSX1NUQVRVU10pCiAJCXJldHVybiBmYWxzZTsKQEAgLTQzNSw3ICs0MzUsNyBAQCBz
dGF0aWMgdm9pZCB1YnVzX3Byb2Nlc3Nfbm90aWZ5X3N0YXR1cyhzdHJ1Y3QgdWJ1c19yZXF1ZXN0
ICpyZXEsIGludCBpZCwgc3RydWN0CiAKIAlpZiAoIWlkKSB7CiAJCS8qIGZpcnN0IGlkOiB1YnVz
ZCdzIHN0YXR1cyBtZXNzYWdlIHdpdGggYSBsaXN0IG9mIGlkcyAqLwotCQl0YiA9IHVidXNfcGFy
c2VfbXNnKGJ1Zi0+ZGF0YSk7CisJCXRiID0gdWJ1c19wYXJzZV9tc2coYnVmLT5kYXRhLCBibG9i
X3Jhd19sZW4oYnVmLT5kYXRhKSk7CiAJCWlmICh0YltVQlVTX0FUVFJfU1VCU0NSSUJFUlNdKSB7
CiAJCQlibG9iX2Zvcl9lYWNoX2F0dHIoY3VyLCB0YltVQlVTX0FUVFJfU1VCU0NSSUJFUlNdLCBy
ZW0pIHsKIAkJCQlpZiAoIWJsb2JfY2hlY2tfdHlwZShibG9iX2RhdGEoY3VyKSwgYmxvYl9sZW4o
Y3VyKSwgQkxPQl9BVFRSX0lOVDMyKSkKZGlmZiAtLWdpdCBhL2xpYnVidXMuYyBiL2xpYnVidXMu
YwppbmRleCBiNDA1ODkxNDE2YzIuLjkxZjMxN2M1OTg2NyAxMDA2NDQKLS0tIGEvbGlidWJ1cy5j
CisrKyBiL2xpYnVidXMuYwpAQCAtMTM5LDcgKzEzOSw3IEBAIHN0YXRpYyB2b2lkIHVidXNfbG9v
a3VwX2NiKHN0cnVjdCB1YnVzX3JlcXVlc3QgKnVyZXEsIGludCB0eXBlLCBzdHJ1Y3QgYmxvYl9h
dHRyCiAJc3RydWN0IGJsb2JfYXR0ciAqKmF0dHI7CiAKIAlyZXEgPSBjb250YWluZXJfb2YodXJl
cSwgc3RydWN0IHVidXNfbG9va3VwX3JlcXVlc3QsIHJlcSk7Ci0JYXR0ciA9IHVidXNfcGFyc2Vf
bXNnKG1zZyk7CisJYXR0ciA9IHVidXNfcGFyc2VfbXNnKG1zZywgYmxvYl9yYXdfbGVuKG1zZykp
OwogCiAJaWYgKCFhdHRyW1VCVVNfQVRUUl9PQkpJRF0gfHwgIWF0dHJbVUJVU19BVFRSX09CSlBB
VEhdIHx8CiAJICAgICFhdHRyW1VCVVNfQVRUUl9PQkpUWVBFXSkKQEAgLTE3NSw3ICsxNzUsNyBA
QCBzdGF0aWMgdm9pZCB1YnVzX2xvb2t1cF9pZF9jYihzdHJ1Y3QgdWJ1c19yZXF1ZXN0ICpyZXEs
IGludCB0eXBlLCBzdHJ1Y3QgYmxvYl9hdAogCXN0cnVjdCBibG9iX2F0dHIgKiphdHRyOwogCXVp
bnQzMl90ICppZCA9IHJlcS0+cHJpdjsKIAotCWF0dHIgPSB1YnVzX3BhcnNlX21zZyhtc2cpOwor
CWF0dHIgPSB1YnVzX3BhcnNlX21zZyhtc2csIGJsb2JfcmF3X2xlbihtc2cpKTsKIAogCWlmICgh
YXR0cltVQlVTX0FUVFJfT0JKSURdKQogCQlyZXR1cm47CmRpZmYgLS1naXQgYS90ZXN0cy9mdXp6
L3Rlc3QtZnV6ei5jIGIvdGVzdHMvZnV6ei90ZXN0LWZ1enouYwppbmRleCA5OTIyZmY5ZGU2MDku
LjdhN2ExZWJlOGIxMSAxMDA2NDQKLS0tIGEvdGVzdHMvZnV6ei90ZXN0LWZ1enouYworKysgYi90
ZXN0cy9mdXp6L3Rlc3QtZnV6ei5jCkBAIC0yOCw3ICsyOCw3IEBAIHN0YXRpYyB2b2lkIF91YnVz
X3BhcnNlX21zZyhjb25zdCB1aW50OF90ICpkYXRhLCBzaXplX3Qgc2l6ZSkKIAlpZiAoYmxvYl9w
YWRfbGVuKGF0dHIpID4gVUJVU19NQVhfTVNHTEVOKQogCQlyZXR1cm47CiAKLQl1YnVzX3BhcnNl
X21zZyhhdHRyKTsKKwl1YnVzX3BhcnNlX21zZyhhdHRyLCBzaXplKTsKIH0KIAogaW50IExMVk1G
dXp6ZXJUZXN0T25lSW5wdXQoY29uc3QgdWludDhfdCAqZGF0YSwgc2l6ZV90IHNpemUpCmRpZmYg
LS1naXQgYS91YnVzZC5oIGIvdWJ1c2QuaAppbmRleCA4NjdjZGU5YTM4NGIuLjkyM2U0M2RkOTJk
YSAxMDA2NDQKLS0tIGEvdWJ1c2QuaAorKysgYi91YnVzZC5oCkBAIC03Miw3ICs3Miw3IEBAIHN0
cnVjdCB1YnVzX21zZ19idWYgKnVidXNfbXNnX25ldyh2b2lkICpkYXRhLCBpbnQgbGVuLCBib29s
IHNoYXJlZCk7CiB2b2lkIHVidXNfbXNnX3NlbmQoc3RydWN0IHVidXNfY2xpZW50ICpjbCwgc3Ry
dWN0IHVidXNfbXNnX2J1ZiAqdWIpOwogc3NpemVfdCB1YnVzX21zZ193cml0ZXYoaW50IGZkLCBz
dHJ1Y3QgdWJ1c19tc2dfYnVmICp1Yiwgc2l6ZV90IG9mZnNldCk7CiB2b2lkIHVidXNfbXNnX2Zy
ZWUoc3RydWN0IHVidXNfbXNnX2J1ZiAqdWIpOwotc3RydWN0IGJsb2JfYXR0ciAqKnVidXNfcGFy
c2VfbXNnKHN0cnVjdCBibG9iX2F0dHIgKm1zZyk7CitzdHJ1Y3QgYmxvYl9hdHRyICoqdWJ1c19w
YXJzZV9tc2coc3RydWN0IGJsb2JfYXR0ciAqbXNnLCBzaXplX3QgbGVuKTsKIAogc3RydWN0IHVi
dXNfY2xpZW50ICp1YnVzZF9wcm90b19uZXdfY2xpZW50KGludCBmZCwgdWxvb3BfZmRfaGFuZGxl
ciBjYik7CiB2b2lkIHVidXNkX3Byb3RvX3JlY2VpdmVfbWVzc2FnZShzdHJ1Y3QgdWJ1c19jbGll
bnQgKmNsLCBzdHJ1Y3QgdWJ1c19tc2dfYnVmICp1Yik7CmRpZmYgLS1naXQgYS91YnVzZF9hY2wu
YyBiL3VidXNkX2FjbC5jCmluZGV4IGYxOWRmOWE4NzVjNy4uZTQyNmE0YWY5NWVmIDEwMDY0NAot
LS0gYS91YnVzZF9hY2wuYworKysgYi91YnVzZF9hY2wuYwpAQCAtNTQ5LDcgKzU0OSw3IEBAIHN0
YXRpYyBpbnQgdWJ1c2RfcmVwbHlfcXVlcnkoc3RydWN0IHVidXNfY2xpZW50ICpjbCwgc3RydWN0
IHVidXNfbXNnX2J1ZiAqdWIsIHN0CiBzdGF0aWMgaW50IHVidXNkX2FjbF9yZWN2KHN0cnVjdCB1
YnVzX2NsaWVudCAqY2wsIHN0cnVjdCB1YnVzX21zZ19idWYgKnViLCBjb25zdCBjaGFyICptZXRo
b2QsIHN0cnVjdCBibG9iX2F0dHIgKm1zZykKIHsKIAlpZiAoIXN0cmNtcChtZXRob2QsICJxdWVy
eSIpKQotCQlyZXR1cm4gdWJ1c2RfcmVwbHlfcXVlcnkoY2wsIHViLCB1YnVzX3BhcnNlX21zZyh1
Yi0+ZGF0YSksIG1zZyk7CisJCXJldHVybiB1YnVzZF9yZXBseV9xdWVyeShjbCwgdWIsIHVidXNf
cGFyc2VfbXNnKHViLT5kYXRhLCBibG9iX3Jhd19sZW4odWItPmRhdGEpKSwgbXNnKTsKIAogCXJl
dHVybiBVQlVTX1NUQVRVU19JTlZBTElEX0NPTU1BTkQ7CiB9CmRpZmYgLS1naXQgYS91YnVzZF9w
cm90by5jIGIvdWJ1c2RfcHJvdG8uYwppbmRleCA0ZGQ4OWRkYjQ5MzkuLjQ3NDY2MDVmNDk2MCAx
MDA2NDQKLS0tIGEvdWJ1c2RfcHJvdG8uYworKysgYi91YnVzZF9wcm90by5jCkBAIC0zNCw5ICsz
NCw5IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgYmxvYl9hdHRyX2luZm8gdWJ1c19wb2xpY3lbVUJV
U19BVFRSX01BWF0gPSB7CiAJW1VCVVNfQVRUUl9HUk9VUF0gPSB7IC50eXBlID0gQkxPQl9BVFRS
X1NUUklORyB9LAogfTsKIAotc3RydWN0IGJsb2JfYXR0ciAqKnVidXNfcGFyc2VfbXNnKHN0cnVj
dCBibG9iX2F0dHIgKm1zZykKK3N0cnVjdCBibG9iX2F0dHIgKip1YnVzX3BhcnNlX21zZyhzdHJ1
Y3QgYmxvYl9hdHRyICptc2csIHNpemVfdCBsZW4pCiB7Ci0JYmxvYl9wYXJzZShtc2csIGF0dHJi
dWYsIHVidXNfcG9saWN5LCBVQlVTX0FUVFJfTUFYKTsKKwlibG9iX3BhcnNlX3VudHJ1c3RlZCht
c2csIGxlbiwgYXR0cmJ1ZiwgdWJ1c19wb2xpY3ksIFVCVVNfQVRUUl9NQVgpOwogCXJldHVybiBh
dHRyYnVmOwogfQogCkBAIC00NTQsNyArNDU0LDcgQEAgdm9pZCB1YnVzZF9wcm90b19yZWNlaXZl
X21lc3NhZ2Uoc3RydWN0IHVidXNfY2xpZW50ICpjbCwgc3RydWN0IHVidXNfbXNnX2J1ZiAqdWIK
IAkvKiBOb3RlOiBubyBjYWxsYmFjayBzaG91bGQgZnJlZSB0aGUgYHViYCBidWZmZXIKIAkgICAg
ICAgICB0aGF0J3MgYWx3YXlzIGRvbmUgcmlnaHQgYWZ0ZXIgdGhlIGNhbGxiYWNrIGZpbmlzaGVz
ICovCiAJaWYgKGNiKQotCQlyZXQgPSBjYihjbCwgdWIsIHVidXNfcGFyc2VfbXNnKHViLT5kYXRh
KSk7CisJCXJldCA9IGNiKGNsLCB1YiwgdWJ1c19wYXJzZV9tc2codWItPmRhdGEsIGJsb2JfcmF3
X2xlbih1Yi0+ZGF0YSkpKTsKIAllbHNlCiAJCXJldCA9IFVCVVNfU1RBVFVTX0lOVkFMSURfQ09N
TUFORDsKIAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18K
b3BlbndydC1kZXZlbCBtYWlsaW5nIGxpc3QKb3BlbndydC1kZXZlbEBsaXN0cy5vcGVud3J0Lm9y
ZwpodHRwczovL2xpc3RzLm9wZW53cnQub3JnL21haWxtYW4vbGlzdGluZm8vb3BlbndydC1kZXZl
bAo=
